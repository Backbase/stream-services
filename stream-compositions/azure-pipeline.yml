resources:
  - repo: self

trigger:
  branches:
    include:
      - develop
  paths:
    include:
      - wsecu-develop

name: $(Date:yyyyMMdd)$(Rev:.r)

pool:
  name: NextGenDocker
  demands:
    - sh
    - maven

stages:
  - stage: Build
    jobs:
      - job: Build
        steps:
          - checkout: self  # self represents the repo where the initial Azure Pipelines YAML file was found
            clean: true
            fetchDepth: 1

          - task: Maven@1
            displayName: 'Install service'
            env:
              JAVA_HOME: /usr/lib/jvm/java-17-openjdk-amd64
            inputs:
              goals: 'clean install'
              mavenPomFile: '$(System.DefaultWorkingDirectory)/pom.xml'
              options: '--settings /opt/bbSettings2.xml'
              mavenOptions: '-Xmx4096M'
              mavenAuthenticateFeed: false